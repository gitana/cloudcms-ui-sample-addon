define(["ui","alpaca","ratchet/dynamic/empty","content-helpers","jquery","app/gadgets/project/document/view/document-view-properties"],(function(e,t,n,r,o,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(t,n){t.exports=e},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),i=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(i).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,n){e.exports=t},function(e,t,n){e.exports=n(4)},function(e,t,n){var r;void 0===(r=function(e){n(5),n(9),n(12),n(14),n(16),n(17),n(19)}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){n(6);var o=n(7),i=n(8),a=n(0);return a.registerGadget("sample-products-list",i.extend({TEMPLATE:o,setup:function(){this.get("/projects/{projectId}/products",this.index)},prepareModel:function(e,t,n){var r=this.observable("project").get(),o=this.observable("branch").get();this.base(e,t,(function(){o.queryNodes({_type:"catalog:product"}).then((function(){t.products=this.asArray();for(var e=0;e<t.products.length;e++){var o=t.products[e];o.imageUrl256="/preview/repository/"+o.getRepositoryId()+"/branch/"+o.getBranchId()+"/node/"+o.getId()+"/default?size=256&name=preview256&force=true",o.imageUrl128="/preview/repository/"+o.getRepositoryId()+"/branch/"+o.getBranchId()+"/node/"+o.getId()+"/default?size=128&name=preview128&force=true",o.browseUrl="/#/projects/"+r._doc+"/documents/"+o._doc}n()}))}))},afterSwap:function(e,t,n,r){this.base(e,t,n,(function(){$(e).find(".media-popup").click((function(e){e.preventDefault();var n=$(this).attr("data-media-index"),r=t.products[n];a.showPopupModal({title:"Viewing: "+r.title,body:"<div style='text-align:center'><img src='"+r.imageUrl256+"'></div>"})})),r()}))}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"",""])},function(e,t){e.exports='<div>\n    {{#each products}}\n    <div class="media">\n        <div class="media-left">\n            <a href="#" class="media-popup" data-media-index="{{@index}}">\n                <img class="media-object" src="{{imageUrl128}}" alt="{{title}}">\n            </a>\n        </div>\n        <div class="media-body">\n            <h4 class="media-heading">\n                <a href="{{browseUrl}}">{{title}}</a>\n            </h4>\n            {{description}}\n        </div>\n    </div>\n    {{/each}}\n</div>\n'},function(e,t){e.exports=n},function(e,t,n){var r;void 0===(r=function(e,t,r){var o=n(10);n(11);var i=n(0);return i.registerDashlet("sample-random-product-dashlet",i.AbstractDashlet.extend({TEMPLATE:o,configureDefault:function(){this.base(),this.config({message:"And your product is..."})},prepareModel:function(e,t,n){var r=this,o=this.observable("branch").get();this.base(e,t,(function(){t.message=r.config().message,o.queryNodes({_type:"catalog:product"}).then((function(){var e=this.asArray(),r=t.product=e[Math.floor(Math.random()*e.length)];r.imageUrl="/preview/repository/"+r.getRepositoryId()+"/branch/"+r.getBranchId()+"/node/"+r.getId()+"/default?size=256&name=preview256",n()}))}))},afterSwap:function(e,t,n,r){this.base(e,t,n,(function(){r()}))},isConfigurable:function(){return!0},handleConfiguration:function(e,t,n){var r={};r.data=t,r.schema={type:"object",properties:{title:{type:"string",title:"Title"},config:{type:"object",title:"Configuration",properties:{message:{type:"string",title:"Message"}}}}},r.options={},r.observableHolder=Ratchet,i.configureDashlet(r,(function(e,t){n(e,t)}))}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports='<div>\n\n    <div style="text-align:center">\n        <p>{{message}}</p>\n        <p>{{product.title}}</p>\n\n        <a href="/#/projects/{{project._doc}}/documents/{{product._doc}}">\n            <img src="{{product.imageUrl}}" alt="{{product.title}}">\n        </a>\n\n    </div>\n\n</div>\n'},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".dashlet.sample-dashlet .dashlet-body>div{padding:10px}",""])},function(e,t,n){var r;void 0===(r=function(e,t,r){var o=n(0),i=n(13);return o.registerAction("create-sample-space",o.AbstractUIAction.extend({defaultConfiguration:function(){var e=this.base();return e.title="Create Sample Space",e.iconClass="fa fa-plus",e},prepareAction:function(e,t,n){e.currentPath=e.observable("path").get(),n()},executeAction:function(e,t,n){var r=this;o.renderForm(e,{data:{title:"My Sample Space",description:"Description of my sample space"},schema:{type:"object",properties:{title:{type:"string",required:!0},description:{type:"string"}}},options:{fields:{title:{type:"text",label:"Title"},description:{type:"textarea",label:"Description"}},focus:"title"}},(function(n){o.showModal({title:t.title,form:n,buttons:[{id:"create",title:"Create",handler:function(t){o.showWaitModal("Creating the sample space...",(function(){r.createHandler(e,n.getValue(),(function(){o.hideWaitModal()}))}))}}],bindFormEnterKeyToButton:"create",cancel:!0},(function(e){}))}))},createHandler:function(e,t,n){i.addContent(e,[{type:"folder",properties:t,parentFolderPath:e.currentPath},{type:"folder",properties:{title:"Files"},parentFolderPath:e.currentPath+"/"+t.title},{type:"file",properties:{title:"helloworld.txt"},parentFolderPath:e.currentPath+"/"+t.title+"/Files",text:"Hello World!"}],(function(e){n()}))}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports=r},function(e,t,n){var r;void 0===(r=function(e,t,r){var o=n(0),i=n(2),a=n(15);return o.registerField("sample-city-picker",i.Fields.SelectField.extend({setup:function(){this.base(),this.options.dataSource=function(e){a.ajax({method:"GET",url:"https://raw.githubusercontent.com/gitana/cloudcms-ui-sample-addon/master/data/cities.json",dataType:"json"}).done((function(t){e(t.cities)}))}}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports=o},function(e,t,n){var r;void 0===(r=function(e,t,r){var o=n(0),i=n(2);return o.registerField("sample-content-picker",i.Fields.SelectField.extend({setup:function(){this.base(),this.options.contentType||(this.options.contentType="catalog:product"),this.options.dataSource={connector:!0,config:{query:{_type:this.options.contentType},mappings:{value:"_doc",text:"title"}}}}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){var o=n(18);return n(0).registerGadget("sample-product-document-properties",o.extend({prepareModel:function(e,t,n){var r=this.observable("document").get();this.base(e,t,(function(){"catalog:product"===r.getTypeQName()&&"sku"===propertyName&&t.properties.push({key:"wickedgoodcupcakes",title:"Wicked Good Cupcakes",value:"https://www.wickedgoodcupcakes.com",link:"https://www.wickedgoodcupcakes.com"}),n()}))}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports=i},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"",""])}])}));